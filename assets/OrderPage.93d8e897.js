import{j as t,c as e,F as c,e as g,p as w,u as b,b as _,r as u}from"./index.0da1565c.js";const p=()=>t("div",{className:"bg-white w-full py-4 px-12 rounded-lg shadow-lg my-2 space-y-2 animate-pulse",children:[e("div",{className:"h-4 bg-slate-200 rounded"}),e("div",{className:"h-4 bg-slate-200 rounded"}),e("div",{className:"h-4 bg-slate-200 rounded"})]}),v=({order:a,setFoodId:l,openModal:d})=>{const{user:n,name:r,notes:s,id:m}=a,i=h=>{l(h),d(!0)};return e(c,{children:t("div",{onClick:()=>i(m),className:"bg-white w-full py-4 px-12 rounded-lg shadow-lg my-2 \r animate__animated animate__fadeIn",children:[t("h1",{children:[e("span",{className:"font-semibold",children:"To"}),": ",n||"fulano"," "]}),t("h1",{children:[e("span",{className:"font-semibold",children:"Order"}),": ",r]}),s&&t("p",{children:["   ",e("span",{className:"font-semibold",children:"Note"}),": ",s]})]})})},y=({order:a,setFoodId:l,openModal:d})=>{const{user:n,name:r,notes:s}=a;return t("div",{className:"bg-white w-full py-4 px-12 rounded-lg shadow-lg my-2 animate__animated animate__fadeIn",children:[t("h1",{children:[e("span",{className:"font-semibold",children:"To"}),": ",n||"fulano"," "]}),t("h1",{children:[e("span",{className:"font-semibold",children:"Order"}),": ",r]}),s&&t("p",{children:["   ",e("span",{className:"font-semibold",children:"Note"}),": ",s]})]})},x=()=>async a=>{const{data:l,error:d}=await g.from("orders").select("cart,id");if(d){console.log(d.message);return}let n=l.map(r=>(r.cart.id=r.id,r.cart));a(w(n))},O=a=>async l=>{const{error:d}=await g.from("orders").update({cart:{...a,foodState:"delivered"}}).eq("id",a.id).select("*");if(d){console.log(d.message);return}l(x())},I=({foodId:a,orders:l,openModal:d})=>{const n=l.find(o=>o.id==a),{name:r,imgFood:s,ingredients:m,user:i}=n,h=b(),N=o=>{h(O(o))};return e(c,{children:e("div",{className:"bg-slate-800/50 w-full h-full bg-gray-900 absolute z-10 bg-opacity-80 top-0  sticky-0 animate__animated animate__animated animate__fadeIn ",children:t("div",{className:"bg-white w-[35%] mx-auto h-auto  grid mt-32 rounded-lg shadow-lg p-8",children:[t("h1",{className:"text-center ml-20  font-black mb-2 ",children:[i==null?void 0:i.toUpperCase(),"'s order:"]}),e("h2",{className:"text-center ml-20  font-semibold  ",children:r}),t("div",{className:"flex space-x-10",children:[e("img",{className:"w-32 h-32 rounded-lg",src:`${s}`,alt:""}),t("div",{children:[e("h3",{className:"font-semibold",children:"Ingredients:"}),e("ul",{children:m.map(o=>t("ol",{children:["-",o," "]},o))})]})]}),t("div",{className:"space-x-10 mt-8 flex justify-center flex-shrink-0",children:[e("button",{className:"bg-red-500 hover:bg-red-800  px-4 py-2 rounded-lg shadow-md\r text-white",onClick:()=>d(!1),children:"Close order"}),e("button",{className:"bg-blue-500 hover:bg-blue-800  px-4 py-2 rounded-lg shadow-md\r text-white",onClick:()=>N(n),children:"Mark as deliverd"})]})]})})})},f=({children:a})=>e(c,{children:t("div",{className:" flex flex-col justify-items-center bg-slate-50 shadow-lg p-2 pb-8 h-full \r w-30 md:w-1/2 lg:w-1/3 xl:w-1/4 overflow-hidden  animate__animated animate__fadeIn",children:[e("h1",{className:" text-green-600 text-lg md:text-xl lg:text-2xl font-bold text-center my-8",children:"Orders Delivered"}),a]})}),k=()=>{const{orders:a}=_(s=>s.orders),[l,d]=u.exports.useState(),[n,r]=u.exports.useState();return t(c,{children:[n&&e(I,{foodId:l,orders:a,openModal:r}),t("div",{className:"flex justify-center space-x-10 animate__animated animate__fadeIn ",children:[e(f,{children:a.length?a.map(s=>{if(s.foodState=="cooking")return e(v,{order:s,setFoodId:d,openModal:r},s.id)}):e(p,{})}),e(f,{children:a.length?a.map(s=>{if(s.foodState=="delivered")return e(y,{order:s},s.id)}):e(p,{})})]})]})},j=()=>{const a=b();return u.exports.useEffect(()=>{a(x())},[]),e("div",{className:"animate__animated animate__fadeIn ",children:e(k,{})})};export{j as default};
