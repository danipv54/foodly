import{j as t,c as e,F as c,e as g,p as w,u as b,b as _,r as u}from"./index.b9185dcd.js";const p=()=>t("div",{className:"bg-white w-full py-4 px-12 rounded-lg shadow-lg my-2 space-y-2 animate-pulse",children:[e("div",{className:"h-4 bg-slate-200 rounded"}),e("div",{className:"h-4 bg-slate-200 rounded"}),e("div",{className:"h-4 bg-slate-200 rounded"})]}),v=({order:a,setFoodId:r,openModal:l})=>{const{user:s,name:n,notes:d,id:m}=a,o=h=>{r(h),l(!0)};return e(c,{children:t("div",{onClick:()=>o(m),className:"bg-white w-full py-4 px-12 rounded-lg shadow-lg my-2 \r animate__animated animate__fadeIn",children:[t("h1",{children:[e("span",{className:"font-semibold",children:"To"}),": ",s||"fulano"," "]}),t("h1",{children:[e("span",{className:"font-semibold",children:"Order"}),": ",n]}),d&&t("p",{children:["   ",e("span",{className:"font-semibold",children:"Note"}),": ",d]})]})})},y=({order:a,setFoodId:r,openModal:l})=>{const{user:s,name:n,notes:d}=a;return t("div",{className:"bg-white w-full py-4 px-12 rounded-lg shadow-lg my-2 animate__animated animate__fadeIn",children:[t("h1",{children:[e("span",{className:"font-semibold",children:"To"}),": ",s||"fulano"," "]}),t("h1",{children:[e("span",{className:"font-semibold",children:"Order"}),": ",n]}),d&&t("p",{children:["   ",e("span",{className:"font-semibold",children:"Note"}),": ",d]})]})},x=()=>async a=>{const{data:r,error:l}=await g.from("orders").select("cart,id");if(l)return;let s=r.map(n=>(n.cart.id=n.id,n.cart));a(w(s))},O=a=>async r=>{const{error:l}=await g.from("orders").update({cart:{...a,foodState:"delivered"}}).eq("id",a.id).select("*");l||r(x())},I=({foodId:a,orders:r,openModal:l})=>{const s=r.find(i=>i.id==a),{name:n,imgFood:d,ingredients:m,user:o}=s,h=b(),N=i=>{h(O(i))};return e(c,{children:e("div",{className:"bg-slate-800/50 w-full h-full bg-gray-900 absolute z-10 bg-opacity-80 top-0  sticky-0 animate__animated animate__animated animate__fadeIn ",children:t("div",{className:"bg-white w-[35%] mx-auto h-auto  grid mt-32 rounded-lg shadow-lg p-8",children:[t("h1",{className:"text-center ml-20  font-black mb-2 ",children:[o==null?void 0:o.toUpperCase(),"'s order:"]}),e("h2",{className:"text-center ml-20  font-semibold  ",children:n}),t("div",{className:"flex space-x-10",children:[e("img",{className:"w-32 h-32 rounded-lg",src:`${d}`,alt:""}),t("div",{children:[e("h3",{className:"font-semibold",children:"Ingredients:"}),e("ul",{children:m.map(i=>t("ol",{children:["-",i," "]},i))})]})]}),t("div",{className:"space-x-10 mt-8 flex justify-center flex-shrink-0",children:[e("button",{className:"bg-red-500 hover:bg-red-800  px-4 py-2 rounded-lg shadow-md\r text-white",onClick:()=>l(!1),children:"Close order"}),e("button",{className:"bg-blue-500 hover:bg-blue-800  px-4 py-2 rounded-lg shadow-md\r text-white",onClick:()=>N(s),children:"Mark as deliverd"})]})]})})})},f=({children:a})=>e(c,{children:t("div",{className:" flex flex-col justify-items-center bg-slate-50 shadow-lg p-2 pb-8 h-full \r w-30 md:w-1/2 lg:w-1/3 xl:w-1/4 overflow-hidden  animate__animated animate__fadeIn",children:[e("h1",{className:" text-green-600 text-lg md:text-xl lg:text-2xl font-bold text-center my-8",children:"Orders Delivered"}),a]})}),k=()=>{const{orders:a}=_(d=>d.orders),[r,l]=u.exports.useState(),[s,n]=u.exports.useState();return t(c,{children:[s&&e(I,{foodId:r,orders:a,openModal:n}),t("div",{className:"flex justify-center space-x-10 animate__animated animate__fadeIn ",children:[e(f,{children:a.length?a.map(d=>{if(d.foodState=="cooking")return e(v,{order:d,setFoodId:l,openModal:n},d.id)}):e(p,{})}),e(f,{children:a.length?a.map(d=>{if(d.foodState=="delivered")return e(y,{order:d},d.id)}):e(p,{})})]})]})},j=()=>{const a=b();return u.exports.useEffect(()=>{a(x())},[]),e("div",{className:"animate__animated animate__fadeIn ",children:e(k,{})})};export{j as default};
